<div class="container mt-5">
  <h2 class="text-center">User Management</h2>
  <table class="table table-bordered">
    <thead class="thead-dark">
      <tr>
        <th>User</th>
        <th>Role</th>
        <th>Gender</th>
        <th>Email</th>
        <th>Account</th>
        <th>Password</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {{#each user}}
        <tr>
          <td>{{this.name}}</td>
          <td>{{this.role_name}}</td>
          <td>{{this.gender}}</td>
          <td>{{this.email}}</td>
          <td>{{this.account}}</td>
          <td>{{this.password}}</td>
          <td>
            {{#if is_ban}}
    <!-- Nếu is_ban là 1, chỉ hiển thị nút Edit -->
              <button class="btn btn-warning btn-sm" data-toggle="modal" onclick="showCreateUser({{json ../role}},{{json this}})">
                  <i class="bi bi-pencil"></i> Edit
              </button>
              <button class="btn btn-primary" data-toggle="modal"></i> <a href="/homepage/reset_user/{{this.id_user}}" class="text-white fs-5 text-decoration-none">Reset Ban</a></button>
            {{else}}
    <!-- Nếu is_ban là 0, hiển thị cả hai nút Edit và Delete -->
              <button class="btn btn-warning btn-sm" data-toggle="modal" onclick="showCreateUser({{json ../role}},{{json this}})">
                <i class="bi bi-pencil"></i> Edit
              </button>
              <button class="btn btn-danger btn-sm" data-toggle="modal" onclick="deleteUser({{this.id_user}})">
                <i class="bi bi-trash"></i> Delete
              </button>
            {{/if}}
          </td>

        </tr>
      {{/each}}
    </tbody>
  </table>
  <div class="text-right mb-3">
    <button class="btn btn-primary" data-toggle="modal" onclick="showCreateUser({{json role}})"><i class="bi bi-plus-circle"></i> Create User</button>
  </div>

  <!-- Modal for Creating User -->
  <div class="modal fade" id="createUserModal" tabindex="-1" role="dialog" aria-labelledby="createUserModalLabel">

  </div>

  <!-- Role Management Section -->
  <h2 class="text-center mt-5">Role Management</h2>
  <table class="table table-bordered">
    <thead class="thead-dark">
      <tr>
        <th>Role</th>
        <th>Authority</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
{{#each role}}
<tr>
  <td>{{this.name}}</td>
  <td>
    <ul class="list-group">
      {{#each ../authority}}
        {{#ifEquals this.id_role ../id_role}}
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <span class="badge badge-primary badge-pill">{{this.name}}</span>
          </li>
        {{/ifEquals}}
      {{/each}}
    </ul>
  </td>

<td>
  {{#ifEquals this.name "user"}}
    <!-- Nếu this.name là "user", không hiển thị các nút -->
  {{else}}
    <!-- Nếu this.name không phải là "user", hiển thị hai nút -->
    <button class="btn btn-warning btn-sm" data-toggle="modal" onclick="showCreateRole({{json ../authority}},{{json this}})"><i class="bi bi-pencil"></i> Edit</button>
    <button class="btn btn-danger btn-sm" data-toggle="modal" onclick="deleteRole({{this.id_role}})"><i class="bi bi-trash"></i> Delete</button>
  {{/ifEquals}}
</td>

</tr>
{{/each}}

    </tbody>
  </table>
  <div class="text-right mb-3">
    <button class="btn btn-primary" data-toggle="modal" onclick="showCreateRole({{json authorityforchose}})"><i class="bi bi-plus-circle"></i> Create Role</button>
  </div>

  <!-- Modal for Creating Role -->
  <div class="modal fade" id="createRoleModal" tabindex="-1" role="dialog" aria-labelledby="createRoleModalLabel">

  </div>

</div>
<script src="/js/admin.js"></script>